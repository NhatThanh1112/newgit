<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Chi tiết sản phẩm</title>
    <link rel="stylesheet" href="./show.css">
</head>

<body>

    <div class="top-menu">
        <div>
            <a href="../Home/sneaker.html"><img src="../imgs/sneaker.png" alt="logo"></a>
        </div>
        <div class="page">
            <div class="nav"><a href="../Home/sneaker.html">
                    <h4>Home</h4>
                </a></div>
            <div class="nav"><a href="#">
                    <h4>Introduction</h4>
                </a></div>
            <a class="nav gender" onclick="scrollDown()">
                <h4 class="type">Men</h4>
            </a>

            <a class="nav gender" onclick="scrollDown()">
                <h4 class="type">Women</h4>
            </a>

            <a class="nav gender" onclick="scrollDown()">
                <h4 class="type">Kids</h4>
            </a>

        </div>
        <div class="icon">
            <a href="./cart.html">
                <i class="fa-solid fa-cart-shopping"></i>
            </a>
            <a id="logIn"></a>
            <a href="../signIn/signIn.html">
                <i class="fas fa-sign-out-alt"></i>
            </a>
        </div>
    </div>

    <div id="product-detail"></div>

    <div class="end">
        <div>
            <img src="/imgs/sneakers.jpg" alt="logo">
        </div>
        <div>
            <h4>NHÀ PHÂN PHỐI ĐỘC QUYỀN SNEAKERS</h4>
            <h5>Hotline: 086655 0286</h5>
            <h5>Address: Number 16, Đội Cấn Street, Ba Đình, Hà Nội</h5>
            <h5>Email: contact@alzadosport.com</h5>
        </div>
        <div>
            <h4>CHÍNH SÁCH CÔNG TY</h4>
            <h5>Vận chuyển và giao hàng</h5>
            <h5>Chính sách bán hàng</h5>
            <h5>Chính Sách Đổi Trả & Bảo Hành</h5>
            <h5>Chính sách bảo mật</h5>
        </div>
        <div>
            <h4>CHÍNH SÁCH CÔNG TY</h4>
            <h5>Vận chuyển và giao hàng</h5>
            <h5>Chính sách bán hàng</h5>
            <h5>Chính Sách Đổi Trả & Bảo Hành</h5>
            <h5>Chính sách bảo mật</h5>
        </div>
        <div>
            <h4>DANH MỤC NỔI BẬT</h4>
            <h5>Giới thiệu về PEAK Sport</h5>
            <h5>Giày bóng rổ</h5>
            <h5>Giày Chạy Bộ</h5>
            <h5>Phụ Kiện</h5>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.5.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script>
        const params = new URLSearchParams(window.location.search);
        const productId = params.get('id');

        // const db = firebase.firestore(); // Đảm bảo Firestore đã được khởi tạo

        db.collection('products').doc(productId).get().then(doc => {
            if (doc.exists) {
                const product = doc.data();
                document.getElementById('product-detail').innerHTML = `
          <div id="divide">         
          <img id="img" class="abc" src="${product.image}" alt="${product.name}" width="300">
          <div class="abc"><h1>${product.name}</h1>  
          <h2>${Number(product.price).toLocaleString('vi-VN')} VND</h2>
          <h3>Gender: ${product.gender || 'Unisex'}</h3>
          <h3>Type: ${product.type || 'General'}</h3>
          <h3>Brand: ${product.brand || 'General'}</h3>
          <button onclick="addToCart('${doc.id}')"><h3>Add to Cart</h3></button>
          </div>
          </div>
          <div id="de">
          <div class="description-toggle">Description<span class="arrow"></span></div>
          <div class="description-content">
          <p>Born on the pitch, the AirStride Runner is a timeless icon of style. Its lightweight, breathable mesh and cushioned sole make it perfect for both active days and casual wear. Durable rubber outsole ensures traction wherever you go.</p>
         </div>
         <div class="description-toggle">Details<span class="arrow"></span></div>
         <div class="description-content">
          <ul>
            <li>Regular fit</li>
            <li>Lace closure</li>
            <li>Breathable mesh upper</li>
            <li>Cushioned midsole for all-day support</li>
            <li>Durable rubber outsole</li>
            <li>Colour: Black / White / Grey</li>
            <li>Product code: ASR-001</li>
          </ul>
          </div>
          </div>
         </div>
        `;

                const toggles = document.querySelectorAll('.description-toggle');

                toggles.forEach(toggle => {
                    const content = toggle.nextElementSibling;

                    toggle.addEventListener('click', () => {
                        if (content.style.display === 'block') {
                            content.style.display = 'none';
                            toggle.classList.remove('active');
                        } else {
                            content.style.display = 'block';
                            toggle.classList.add('active');
                        }
                    });
                });

            } else {
                document.getElementById('product-detail').innerText = 'Không tìm thấy sản phẩm';
            }
        });

        function addToCart(productId) {
            db.collection('products').doc(productId).update({ onCart: true })
                .then(() => {
                    alert('Sản phẩm đã được thêm vào giỏ hàng');
                })
                .catch(error => {
                    alert('Lỗi khi thêm sản phẩm vào giỏ hàng');
                });
        }
    </script>

</body>

</html>